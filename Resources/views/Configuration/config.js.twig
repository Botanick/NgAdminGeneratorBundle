{% verbatim %}(function() {
    "use strict";

    var app = angular.module('myApp', ['ng-admin']);

    app.config(function (NgAdminConfigurationProvider) {
        var nga = NgAdminConfigurationProvider;
        var app = nga.application('')
            .baseApiUrl(location.protocol + '//' + location.hostname + (location.port ? ':' + location.port : '') + '/api/');
{% endverbatim -%}

{%- for entityName, metadata in entities %}

        /** {{ entityName|capitalize }} **/
        var {{ entityName }} = nga.entity('{{ entityName }}');
        app.addEntity({{ entityName }});

        var {{ entityName }}Fields = [
{% for field in metadata.fieldMappings %}            nga.field('{{ field.fieldName }}'){{ loop.last ? '' : ',' }}
{% endfor %}
        ];

        {{ entityName }}.dashboardView()
            .fields({{ entityName }}Fields);

        {{ entityName }}.listView()
            .fields({{ entityName }}Fields)
            .listActions(['show', 'edit', 'delete']);

        {{ entityName }}.creationView()
            .fields({{ entityName }}Fields);

        {{ entityName }}.editionView()
            .fields({{ entityName }}Fields);

        {{ entityName }}.showView()
            .fields({{ entityName }}Fields);
{% endfor %}

        nga.configure(app);
    });
})();
