{% verbatim %}(function() {
    "use strict";

    var app = angular.module('myApp', ['ng-admin']);

    app.config(function(NgAdminConfigurationProvider, Application, Entity, Field, Reference, ReferencedList, ReferenceMany) {
        function pagination(page, maxPerPage) {
            return {
                _offset: (page - 1) * maxPerPage,
                _limit: maxPerPage
            };
        }
{% endverbatim -%}

{%- for name, entity in entities %}

        var {{ name }} = new Entity('{{ name }}')
            .pagination(pagination)
            .dashboard(10)
    {% for field in entity.fieldMappings %}
        .addField(new Field('{{ field.fieldName }}').type('{{ field.type }}'))
    {% endfor %}
    ;
{% endfor -%}

{%- verbatim %}
        var app = new Application()
            .baseApiUrl('./api/')
{% endverbatim %}

{%- for name, fields in entities %}
            .addEntity({{ name }}){{ loop.last ? ";" : "" }}
{% endfor -%}

{%- verbatim %}
        NgAdminConfigurationProvider.configure(app);
    })
})();
{% endverbatim -%}
